(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[896],{8565:function(e,t,r){Promise.resolve().then(r.bind(r,5522))},1316:function(e,t,r){"use strict";r.d(t,{$v:function(){return o},C3:function(){return u},C6:function(){return c},Vh:function(){return i},aL:function(){return a},rF:function(){return m}});var n=r(9842),s=r(18);let a=async()=>{try{let e=(0,n.hJ)(s.db,"quizzes");return(await (0,n.PL)(e)).docs.map(e=>e.id)}catch(e){console.error(e)}},c=async e=>{try{let t=(0,n.hJ)(s.db,"quizzes"),r=(0,n.IO)(t,(0,n.ar)("userName","==",e),(0,n.Xo)("timestamp","desc")),a=await (0,n.PL)(r),c=[];return a.forEach(e=>{c.push({id:e.id,...e.data()})}),c}catch(e){return console.error("Error getting documents: ",e),[]}},i=async e=>{try{let t=(0,n.JU)(s.db,"quizzes",e),r=await (0,n.QT)(t);if(r.exists())return{...r.data()};return null}catch(e){return console.error(e),null}},o=async e=>{try{let t=(0,n.hJ)(s.db,"participants/participantsCollection/".concat(e));return(await (0,n.PL)(t)).docs.map(e=>e.data())}catch(e){return console.error(e),null}},u=async e=>{try{let t=(0,n.JU)(s.db,"quizzes",e);return await (0,n.r7)(t,{available:!1}),!0}catch(e){return console.error(e),!1}},l=async e=>{try{let t=(0,n.JU)(s.db,"quizzes",e),r=(await (0,n.QT)(t)).data();r&&"number"==typeof r.participant?await (0,n.r7)(t,{participant:r.participant+1}):console.log("데이터베이스 파일 구조 오류")}catch(e){console.error(e)}},d=e=>{let t=0,r=Object.keys(e.quiz);return r.map(r=>{e.quiz[r].isCorrect&&(t+=1)}),{status:!0,totalQuestion:r.length,correctAnswer:t}},m=async e=>{let{quiz:t,participantName:r}=e,a=d(t),c={quiz:{...t},participantName:r,result:a};try{let e=(0,n.JU)(s.db,"participants/participantsCollection/".concat(t.id,"/").concat(r));return await (0,n.pl)(e,c),l(t.id),a}catch(e){return console.error(e),{status:!1,totalQuestion:0,correctAnswer:0}}}},5522:function(e,t,r){"use strict";var n=r(7437),s=r(2265),a=r(6463),c=r(1316),i=r(4115),o=r(5785);t.default=e=>{let{uuid:t}=e,[r,u]=(0,s.useState)(null),l=(0,a.useRouter)();(0,s.useEffect)(()=>{(async()=>{t&&u(await (0,c.Vh)(t))})()},[t]);let d=(e,t)=>{r&&(r.quiz[e].selectedAnswer=t,t.toString()===r.quiz[e].correct?r.quiz[e].isCorrect=!0:r.quiz[e].isCorrect=!1,console.log(r))},m=async()=>{if(r){let e=!0;if(Object.keys(r.quiz).forEach(t=>{if(e&&(null===r.quiz[t].selectedAnswer||void 0===r.quiz[t].selectedAnswer)){e=!1,alert("모든 답변을 작성해주세요");return}}),e){let e=prompt("당신이 누구인지 알려주세요.");e?await (0,c.rF)({quiz:r,participantName:e}).then(e=>{if(e.status)return alert(e.totalQuestion+"문제 중 "+e.correctAnswer+"문제를 맞혔어요."),l.push("/")}):alert("당신이 누구인지 알기 전에는 제출할 수 없어요.")}}};return r?r.available?(0,n.jsx)("div",{className:"min-h-screen flex items-start justify-center py-12 max-sm:px-2",children:(0,n.jsxs)("div",{className:"w-1/2 max-sm:w-full flex flex-col",children:[(0,n.jsx)("p",{className:"text-3xl max-sm:text-xl font-bold",children:r.quizTitle}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("p",{className:"max-sm:text-xs text-gray-500",children:["이 퀴즈는 ",r.userName,"님이 만들었습니다."]}),(0,n.jsx)(o.C,{children:(0,n.jsxs)("p",{children:[r.participant,"명 참여"]})})]}),Object.keys(r.quiz).map((e,t)=>(0,n.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 my-4",children:[(0,n.jsxs)("p",{className:"text-lg font-semibold mb-4 max-sm:text-base",children:["Q",t+1,". ",r.quiz[e].question]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"radio",name:r.quiz[e].question,value:1,onChange:()=>{d(e,1)},className:"form-radio text-indigo-600"}),(0,n.jsx)("p",{className:"text-base text-gray-700 max-sm:text-xs",children:r.quiz[e].answer1})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"radio",name:r.quiz[e].question,value:2,onChange:()=>{d(e,2)},className:"form-radio text-indigo-600"}),(0,n.jsx)("p",{className:"text-base text-gray-700 max-sm:text-xs",children:r.quiz[e].answer2})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"radio",name:r.quiz[e].question,value:3,onChange:()=>{d(e,3)},className:"form-radio text-indigo-600"}),(0,n.jsx)("p",{className:"text-base text-gray-700 max-sm:text-xs",children:r.quiz[e].answer3})]})]})]},t)),(0,n.jsx)(i.zx,{className:"hover:bg-green-600",bg_color:"bg-green-500",method:()=>{m()},children:"제출하기"})]})}):(0,n.jsx)("div",{className:"w-screen h-screen flex justify-center items-center",children:"해당 퀴즈는 제작자에 의해 비활성화 되었습니다."}):(0,n.jsx)("div",{className:"w-screen h-screen flex justify-center items-center",children:"Loading..."})}},5785:function(e,t,r){"use strict";r.d(t,{C:function(){return c}});var n=r(7437),s=r(6273),a=r(6804);let c=e=>{let{className:t,children:r,text_color:c,bg_color:i}=e;return(0,n.jsx)("div",{className:(0,s.cn)("px-3 py-1 rounded-md ".concat(i||a.D.bg_color," ").concat(c||a.D.text_color),t),children:r})}},4115:function(e,t,r){"use strict";r.d(t,{Qj:function(){return u},z:function(){return o},zx:function(){return i}});var n=r(7437),s=r(6273),a=r(7138),c=r(6804);let i=e=>{let{className:t,children:r,text_color:a,bg_color:i,method:o}=e;return(0,n.jsx)("button",{className:(0,s.cn)("px-6 py-3 ".concat(i||c.D.bg_color," ").concat(a||c.D.text_color," rounded-md transition"),t),onClick:o,children:r})},o=e=>{let{className:t,children:r,text_color:a,bg_color:i,method:o}=e;return(0,n.jsx)("button",{className:(0,s.cn)("px-6 py-3 ".concat(i||c.D.bg_color," ").concat(a||c.D.text_color," px-4 py-2 rounded-full shadow-lg  transition"),t),onClick:o,children:r})},u=e=>{let{className:t,children:r,text_color:i,bg_color:o,link:u}=e;return(0,n.jsx)(a.default,{href:u,children:(0,n.jsx)("p",{className:(0,s.cn)("px-6 py-3 ".concat(o||c.D.bg_color," ").concat(i||c.D.text_color," rounded-md transition"),t),children:r})})}},6804:function(e,t,r){"use strict";r.d(t,{D:function(){return n},e:function(){return s}});let n={bg_color:"bg-blue-500",text_color:"text-white"},s=async e=>{try{await navigator.clipboard.writeText("https://itsjh1242.github.io/quiz-me/quizzes/"+e),alert("복사 완료")}catch(e){alert("복사 실패, "+e)}}},6273:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(4839),s=r(6164);let a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}},18:function(e,t,r){"use strict";r.d(t,{Ap:function(){return u},I8:function(){return o},db:function(){return i}});var n=r(5236),s=r(5735),a=r(9842);let c=(0,n.C6)().length?(0,n.Mq)():(0,n.ZF)({apiKey:"AIzaSyAjJd8AOAqSmjCTlXLT73iIAx-HNyA8YKs",authDomain:"quizme-f366b.firebaseapp.com",projectId:"quizme-f366b",storageBucket:"quizme-f366b.appspot.com",messagingSenderId:"472802751724",appId:"1:472802751724:web:9ae831ce90bfcec734a1c9",measurementId:"G-5PY4F72WES"}),i=(0,a.ad)(c),o=(0,s.v0)(c),u=new s.hJ},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[358,54,177,138,971,23,744],function(){return e(e.s=8565)}),_N_E=e.O()}]);