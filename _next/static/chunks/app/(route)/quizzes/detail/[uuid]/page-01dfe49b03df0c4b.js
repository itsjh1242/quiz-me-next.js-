(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[649],{2627:function(e,t,r){Promise.resolve().then(r.bind(r,5130))},1316:function(e,t,r){"use strict";r.d(t,{$v:function(){return l},C3:function(){return o},C6:function(){return c},Vh:function(){return i},aL:function(){return n},rF:function(){return x}});var a=r(9842),s=r(18);let n=async()=>{try{let e=(0,a.hJ)(s.db,"quizzes");return(await (0,a.PL)(e)).docs.map(e=>e.id)}catch(e){console.error(e)}},c=async e=>{try{let t=(0,a.hJ)(s.db,"quizzes"),r=(0,a.IO)(t,(0,a.ar)("userName","==",e),(0,a.Xo)("timestamp","desc")),n=await (0,a.PL)(r),c=[];return n.forEach(e=>{c.push({id:e.id,...e.data()})}),c}catch(e){return console.error("Error getting documents: ",e),[]}},i=async e=>{try{let t=(0,a.JU)(s.db,"quizzes",e),r=await (0,a.QT)(t);if(r.exists())return{...r.data()};return null}catch(e){return console.error(e),null}},l=async e=>{try{let t=(0,a.hJ)(s.db,"participants/participantsCollection/".concat(e));return(await (0,a.PL)(t)).docs.map(e=>e.data())}catch(e){return console.error(e),null}},o=async e=>{try{let t=(0,a.JU)(s.db,"quizzes",e);return await (0,a.r7)(t,{available:!1}),!0}catch(e){return console.error(e),!1}},u=async e=>{try{let t=(0,a.JU)(s.db,"quizzes",e),r=(await (0,a.QT)(t)).data();r&&"number"==typeof r.participant?await (0,a.r7)(t,{participant:r.participant+1}):console.log("데이터베이스 파일 구조 오류")}catch(e){console.error(e)}},d=e=>{let t=0,r=Object.keys(e.quiz);return r.map(r=>{e.quiz[r].isCorrect&&(t+=1)}),{status:!0,totalQuestion:r.length,correctAnswer:t}},x=async e=>{let{quiz:t,participantName:r}=e,n=d(t),c={quiz:{...t},participantName:r,result:n};try{let e=(0,a.JU)(s.db,"participants/participantsCollection/".concat(t.id,"/").concat(r));return await (0,a.pl)(e,c),u(t.id),n}catch(e){return console.error(e),{status:!1,totalQuestion:0,correctAnswer:0}}}},5130:function(e,t,r){"use strict";var a=r(7437),s=r(2265),n=r(6463),c=r(1316),i=r(6804),l=r(5785),o=r(4115);t.default=e=>{let{uuid:t}=e,r=(0,n.useRouter)(),[u,d]=(0,s.useState)(null),[x,m]=(0,s.useState)(null),[p,h]=(0,s.useState)(null),[f,b]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{if(t){let e=await (0,c.Vh)(t);d(e),h(e),m(await (0,c.$v)(t))}})()},[t]);let g=async()=>{window.confirm("일단 비활성화하면 다시 활성화할 수 없습니다.")&&(await (0,c.C3)(t),r.back())};return((0,s.useEffect)(()=>{x&&""!==f&&h(x.filter(e=>e.participantName===f)[0].quiz)},[x,f]),u&&p)?(0,a.jsx)("div",{className:"min-h-screen flex items-start justify-center py-12 max-sm:px-2",children:(0,a.jsxs)("div",{className:"w-1/2 max-sm:w-full flex flex-col",children:[(0,a.jsx)("p",{className:"text-3xl max-sm:text-xl font-bold",children:u.quizTitle}),(0,a.jsxs)("div",{className:"flex gap-3 my-3",children:[u.available?(0,a.jsx)(l.C,{bg_color:"bg-green-500",children:(0,a.jsx)("p",{children:"활성화"})}):(0,a.jsx)(l.C,{bg_color:"bg-gray-500",children:(0,a.jsx)("p",{children:"비활성화"})}),(0,a.jsxs)(l.C,{children:[u.participant,"명 참여"]}),(0,a.jsx)("div",{className:"cursor-pointer",onClick:()=>{(0,i.e)(t)},children:(0,a.jsx)(l.C,{bg_color:"bg-gray-500",children:"링크 복사하기"})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 my-3",children:[(0,a.jsx)("p",{className:"text-2xl max-sm:text-base",children:""!==f?f+"님의 답안":"퀴즈 답안"}),(0,a.jsx)("div",{className:"space-y-4",children:Object.keys(p.quiz).map((e,t)=>(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,a.jsxs)("p",{className:"text-lg font-semibold mb-4",children:["Q",t+1,". ",p.quiz[e].question]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"radio",name:p.quiz[e].question,value:1,checked:1===(p.quiz[e].selectedAnswer||parseInt(p.quiz[e].correct)),disabled:!0,className:"form-radio text-indigo-600"}),(0,a.jsx)("p",{className:"text-base text-gray-700 max-sm:text-xs",children:p.quiz[e].answer1})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"radio",name:p.quiz[e].question,value:2,checked:2===(p.quiz[e].selectedAnswer||parseInt(p.quiz[e].correct)),disabled:!0,className:"form-radio text-indigo-600"}),(0,a.jsx)("p",{className:"text-base text-gray-700 max-sm:text-xs",children:p.quiz[e].answer2})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"radio",name:p.quiz[e].question,value:3,checked:3===(p.quiz[e].selectedAnswer||parseInt(p.quiz[e].correct)),disabled:!0,className:"form-radio text-indigo-600"}),(0,a.jsx)("p",{className:"text-base text-gray-700 max-sm:text-xs",children:p.quiz[e].answer3})]})]})]},t))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 my-3",children:[(0,a.jsx)("p",{className:"text-2xl max-sm:text-base",children:"퀴즈 참가자"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:x&&Object.keys(x).length>0?Object.keys(x).map((e,t)=>(0,a.jsx)("div",{className:"bg-white shadow-lg rounded-lg p-4 flex items-center justify-center hover:shadow-xl transition-shadow duration-300 cursor-pointer",onClick:()=>{b(x[e].participantName)},children:(0,a.jsx)("span",{className:"text-xl font-semibold text-gray-800 overflow-hidden whitespace-nowrap text-ellipsis",children:x[e].participantName})},t)):(0,a.jsx)("p",{className:"text-xl font-semibold text-gray-800 whitespace-nowrap",children:"아직 퀴즈에 참여한 사람이 없네요."})})]}),(0,a.jsx)(o.zx,{bg_color:"bg-red-500",className:"hover:bg-red-600",method:()=>{u.available?g():alert("이미 비활성화 상태인 퀴즈입니다.")},children:"퀴즈 비활성화 하기"})]})}):(0,a.jsx)("div",{className:"w-screen h-screen flex justify-center items-center",children:"Loading..."})}},5785:function(e,t,r){"use strict";r.d(t,{C:function(){return c}});var a=r(7437),s=r(6273),n=r(6804);let c=e=>{let{className:t,children:r,text_color:c,bg_color:i}=e;return(0,a.jsx)("div",{className:(0,s.cn)("px-3 py-1 rounded-md ".concat(i||n.D.bg_color," ").concat(c||n.D.text_color),t),children:r})}},4115:function(e,t,r){"use strict";r.d(t,{Qj:function(){return o},z:function(){return l},zx:function(){return i}});var a=r(7437),s=r(6273),n=r(7138),c=r(6804);let i=e=>{let{className:t,children:r,text_color:n,bg_color:i,method:l}=e;return(0,a.jsx)("button",{className:(0,s.cn)("px-6 py-3 ".concat(i||c.D.bg_color," ").concat(n||c.D.text_color," rounded-md transition"),t),onClick:l,children:r})},l=e=>{let{className:t,children:r,text_color:n,bg_color:i,method:l}=e;return(0,a.jsx)("button",{className:(0,s.cn)("px-6 py-3 ".concat(i||c.D.bg_color," ").concat(n||c.D.text_color," px-4 py-2 rounded-full shadow-lg  transition"),t),onClick:l,children:r})},o=e=>{let{className:t,children:r,text_color:i,bg_color:l,link:o}=e;return(0,a.jsx)(n.default,{href:o,children:(0,a.jsx)("p",{className:(0,s.cn)("px-6 py-3 ".concat(l||c.D.bg_color," ").concat(i||c.D.text_color," rounded-md transition"),t),children:r})})}},6804:function(e,t,r){"use strict";r.d(t,{D:function(){return a},e:function(){return s}});let a={bg_color:"bg-blue-500",text_color:"text-white"},s=async e=>{try{await navigator.clipboard.writeText("https://itsjh1242.github.io/quizzes/"+e),alert("복사 완료")}catch(e){alert("복사 실패, "+e)}}},6273:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(4839),s=r(6164);let n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},18:function(e,t,r){"use strict";r.d(t,{Ap:function(){return o},I8:function(){return l},db:function(){return i}});var a=r(5236),s=r(5735),n=r(9842);let c=(0,a.C6)().length?(0,a.Mq)():(0,a.ZF)({apiKey:"AIzaSyAjJd8AOAqSmjCTlXLT73iIAx-HNyA8YKs",authDomain:"quizme-f366b.firebaseapp.com",projectId:"quizme-f366b",storageBucket:"quizme-f366b.appspot.com",messagingSenderId:"472802751724",appId:"1:472802751724:web:9ae831ce90bfcec734a1c9",measurementId:"G-5PY4F72WES"}),i=(0,n.ad)(c),l=(0,s.v0)(c),o=new s.hJ},6463:function(e,t,r){"use strict";var a=r(1169);r.o(a,"redirect")&&r.d(t,{redirect:function(){return a.redirect}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[358,54,177,138,971,23,744],function(){return e(e.s=2627)}),_N_E=e.O()}]);