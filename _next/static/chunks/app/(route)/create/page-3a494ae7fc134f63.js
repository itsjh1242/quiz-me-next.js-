(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[502],{8582:function(e,t,r){Promise.resolve().then(r.bind(r,6902))},6902:function(e,t,r){"use strict";let n;r.r(t),r.d(t,{default:function(){return N}});var l=r(7437),c=r(2265),a=r(6463),o=r(9188);let u=e=>{let t="function"==typeof e,r=(0,c.useRef)(e);(0,c.useEffect)(()=>{r.current=e}),(0,c.useEffect)(()=>{if(t){let e=e=>{let t=r.current(e);return"string"==typeof t?(e.preventDefault(),e.returnValue=t):e.defaultPrevented?e.returnValue="":void 0};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}},[t])},s=e=>{let{qRef:t,a1Ref:r,a2Ref:n,a3Ref:l,c1Ref:c,c2Ref:a,c3Ref:o,quiz:u,selectedQuiz:s,isInit:i}=e,d=u[s].correct.toString();t.current&&r.current&&n.current&&l.current&&c.current&&a.current&&o.current&&(t.current.value=i?"":u[s].question,r.current.value=i?"":u[s].answer1,n.current.value=i?"":u[s].answer2,l.current.value=i?"":u[s].answer3,c.current.checked=!i&&"1"===d,a.current.checked=!i&&"2"===d,o.current.checked=!i&&"3"===d)};var i=r(9842),d=r(18),f={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let m=new Uint8Array(16),h=[];for(let e=0;e<256;++e)h.push((e+256).toString(16).slice(1));var p=function(e,t,r){if(f.randomUUID&&!t&&!e)return f.randomUUID();let l=(e=e||{}).random||(e.rng||function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(m)})();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=l[e];return t}return function(e,t=0){return h[e[t+0]]+h[e[t+1]]+h[e[t+2]]+h[e[t+3]]+"-"+h[e[t+4]]+h[e[t+5]]+"-"+h[e[t+6]]+h[e[t+7]]+"-"+h[e[t+8]]+h[e[t+9]]+"-"+h[e[t+10]]+h[e[t+11]]+h[e[t+12]]+h[e[t+13]]+h[e[t+14]]+h[e[t+15]]}(l)};let x=async e=>{let{quiz:t,user:r}=e,n=prompt("퀴즈 제목을 입력해주세요.");if(n){let e=p(),l={id:e,quiz:{...t},quizTitle:n,userName:r.displayName,available:!0,timestamp:i.EK.now(),participant:0};try{return await (0,i.pl)((0,i.JU)(d.db,"quizzes",e),l),e}catch(e){return console.error(e),null}}};var b=r(4115),g=r(6273);let v={label:"label",placeholder:"입력하세요",focus_color:"ring-blue-500"},w=e=>{let{className:t,prop_ref:r,label:n,type:c,placeholder:a,focus_color:o,method:u,AddQuizContextTarget:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("label",{className:"block text-gray-700 mb-2",children:void 0===n?v.label:n}),(0,l.jsx)("input",{ref:void 0===r?null:r,type:void 0===c?v.label:c,className:(0,g.cn)("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:".concat(void 0===o?v.focus_color:o),t),placeholder:void 0===a?v.placeholder:a,onChange:e=>{u&&u(e,s)}})]})};var y=r(1404);let j=e=>{let{isEditMode:t,setIsEditMode:r,quizCount:n,addQuiz:a,editQuiz:o,deleteQuiz:u,initQuiz:s,qRef:i,a1Ref:d,a2Ref:f,a3Ref:m,c1Ref:h,c2Ref:p,c3Ref:x}=e,[g,v]=(0,c.useState)({q:null,a1:null,a2:null,a3:null,c:null}),y=(e,t)=>{v(r=>({...r,[t]:e.target.value}))},j=()=>{if(n>=10)return alert("만들 수 있는 퀴즈는 10개 입니다.");let e={...g};for(let t in e)if(null===e[t])return alert("모든 항목을 작성해주세요.");if(t)return o(e.q,e.a1,e.a2,e.a3,e.c),s(!0),r(!1),null;a(e.q,e.a1,e.a2,e.a3,e.c)};return(0,c.useEffect)(()=>{t&&s(!1)},[s,t]),(0,l.jsxs)("div",{className:"bg-white p-8 rounded shadow-md w-full max-sm:max-w-sm",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:t?"퀴즈 수정":"퀴즈 추가"}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(w,{prop_ref:i,label:"질문",placeholder:"질문을 입력하세요",method:(e,t)=>{y(e,t)},AddQuizContextTarget:"q"})}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(w,{prop_ref:d,label:"답안 1",placeholder:"첫 번째 답안을 입력하세요",method:(e,t)=>{y(e,t)},AddQuizContextTarget:"a1"})}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(w,{prop_ref:f,label:"답안 2",placeholder:"두 번째 답안을 입력하세요",method:(e,t)=>{y(e,t)},AddQuizContextTarget:"a2"})}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(w,{prop_ref:m,label:"답안 3",placeholder:"세 번째 답안을 입력하세요",method:(e,t)=>{y(e,t)},AddQuizContextTarget:"a3"})}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-gray-700 mb-2",children:"정답은 몇 번인가요?"}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("input",{ref:h,type:"radio",name:"correct",value:1,onChange:e=>{y(e,"c")}}),"1번",(0,l.jsx)("input",{ref:p,type:"radio",name:"correct",value:2,onChange:e=>{y(e,"c")}}),"2번",(0,l.jsx)("input",{ref:x,type:"radio",name:"correct",value:3,onChange:e=>{y(e,"c")}}),"3번"]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(b.z,{className:"w-1/2 hover:bg-blue-600",method:()=>{j()},children:"저장"}),t?(0,l.jsx)(b.z,{className:"w-1/2 hover:bg-red-600",bg_color:"bg-red-500",method:()=>{u()},children:"삭제"}):null]})]})};var N=()=>{(0,y.bg)()||(0,a.redirect)("/"),u(e=>e.preventDefault());let e=(0,o.Z)(),t=(0,a.useRouter)(),[r,n]=(0,c.useState)({}),[i,d]=(0,c.useState)(0),[f,m]=(0,c.useState)(0),[h,p]=(0,c.useState)(!1),[g,v]=(0,c.useState)(""),w=(0,c.useRef)(null),N=(0,c.useRef)(null),R=(0,c.useRef)(null),z=(0,c.useRef)(null),_=(0,c.useRef)(null),q=(0,c.useRef)(null),E=(0,c.useRef)(null),I=e=>{let{q:t,a1:r,a2:l,a3:c,c:a}=e;n(e=>({...e,[f]:{question:t,answer1:r,answer2:l,answer3:c,correct:a}})),d(i+1),m(f+1)},C=e=>{let{q:t,a1:r,a2:l,a3:c,c:a}=e;n(e=>({...e,[g]:{question:t,answer1:r,answer2:l,answer3:c,correct:a}}))},k=()=>{let e={...r};delete e[g],n(e),d(i-1),D(!0),p(!1)},A=async()=>{try{if(Object.keys(r).length>=1){let n=await x({quiz:r,user:e});null!==n||void 0!==n?t.replace("/share/"+n):alert("Error.")}else alert("퀴즈는 최소 1개 이상 만들어야 합니다.")}catch(e){console.error(e)}},D=e=>{s({qRef:w,a1Ref:N,a2Ref:R,a3Ref:z,c1Ref:_,c2Ref:q,c3Ref:E,quiz:r,selectedQuiz:g,isInit:e})};return(0,c.useEffect)(()=>{console.log(r)},[r]),(0,l.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col items-center justify-center py-12",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"새로운 퀴즈 만들기"}),(0,l.jsxs)("div",{className:"w-full sm:w-1/2 flex max-sm:flex-col justify-center items-start max-sm:items-center gap-4",children:[(0,l.jsx)(j,{isEditMode:h,setIsEditMode:p,quizCount:i,addQuiz:(e,t,r,n,l)=>I({q:e,a1:t,a2:r,a3:n,c:l}),editQuiz:(e,t,r,n,l)=>C({q:e,a1:t,a2:r,a3:n,c:l}),deleteQuiz:()=>{k()},initQuiz:e=>D(e),qRef:w,a1Ref:N,a2Ref:R,a3Ref:z,c1Ref:_,c2Ref:q,c3Ref:E}),(0,l.jsxs)("div",{className:"bg-white p-8 rounded shadow-md w-full max-w-md max-sm:max-w-sm ",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"퀴즈 목록"}),Object.keys(r).map((e,t)=>(0,l.jsx)("p",{className:"mb-2 font-bold cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap",onClick:()=>{v(e),p(!0)},children:r[e].question},t))]})]}),(0,l.jsx)(b.z,{className:"fixed bottom-4 right-1/2 translate-x-1/2 w-1/2 max-sm:w-11/12 hover:bg-green-600",bg_color:"bg-green-500",method:()=>{A()},children:(0,l.jsx)("p",{children:"퀴즈 생성"})})]})}},4115:function(e,t,r){"use strict";r.d(t,{Qj:function(){return s},z:function(){return u},zx:function(){return o}});var n=r(7437),l=r(6273),c=r(7138),a=r(6804);let o=e=>{let{className:t,children:r,text_color:c,bg_color:o,method:u}=e;return(0,n.jsx)("button",{className:(0,l.cn)("px-6 py-3 ".concat(o||a.D.bg_color," ").concat(c||a.D.text_color," rounded-md transition"),t),onClick:u,children:r})},u=e=>{let{className:t,children:r,text_color:c,bg_color:o,method:u}=e;return(0,n.jsx)("button",{className:(0,l.cn)("px-6 py-3 ".concat(o||a.D.bg_color," ").concat(c||a.D.text_color," px-4 py-2 rounded-full shadow-lg  transition"),t),onClick:u,children:r})},s=e=>{let{className:t,children:r,text_color:o,bg_color:u,link:s}=e;return(0,n.jsx)(c.default,{href:s,children:(0,n.jsx)("p",{className:(0,l.cn)("px-6 py-3 ".concat(u||a.D.bg_color," ").concat(o||a.D.text_color," rounded-md transition"),t),children:r})})}},6804:function(e,t,r){"use strict";r.d(t,{D:function(){return n},e:function(){return l}});let n={bg_color:"bg-blue-500",text_color:"text-white"},l=async e=>{try{await navigator.clipboard.writeText("https://itsjh1242.github.io/quizzes/"+e),alert("복사 완료")}catch(e){alert("복사 실패, "+e)}}},1404:function(e,t,r){"use strict";r.d(t,{bg:function(){return c},qj:function(){return a},w7:function(){return o}});var n=r(18),l=r(5735);function c(){try{if(n.I8.currentUser)return!0;return!1}catch(e){console.error(e)}}async function a(){try{await (0,l.rh)(n.I8,n.Ap)}catch(e){console.error("Error signing in with Google",e)}}async function o(){try{return n.I8.signOut()}catch(e){console.error("Error signing out with Google",e)}}},6273:function(e,t,r){"use strict";r.d(t,{cn:function(){return c}});var n=r(4839),l=r(6164);let c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.m6)((0,n.W)(t))}},18:function(e,t,r){"use strict";r.d(t,{Ap:function(){return s},I8:function(){return u},db:function(){return o}});var n=r(5236),l=r(5735),c=r(9842);let a=(0,n.C6)().length?(0,n.Mq)():(0,n.ZF)({apiKey:"AIzaSyAjJd8AOAqSmjCTlXLT73iIAx-HNyA8YKs",authDomain:"quizme-f366b.firebaseapp.com",projectId:"quizme-f366b",storageBucket:"quizme-f366b.appspot.com",messagingSenderId:"472802751724",appId:"1:472802751724:web:9ae831ce90bfcec734a1c9",measurementId:"G-5PY4F72WES"}),o=(0,c.ad)(a),u=(0,l.v0)(a),s=new l.hJ},9188:function(e,t,r){"use strict";var n=r(2265),l=r(18);t.Z=()=>{let[e,t]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=l.I8.onAuthStateChanged(e=>{e?t(e):t(null)});return()=>e()},[e]),e}},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[358,54,177,138,971,23,744],function(){return e(e.s=8582)}),_N_E=e.O()}]);